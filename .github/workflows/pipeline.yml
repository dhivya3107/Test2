name: CI


# Controls when the workflow will run on pushs
on:
  # Triggers the workflow on push or pull request events but only for the main branch 
  push:
    branches: 
      - three
jobs:
  check-for-changes:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout dependent repo
      uses: actions/checkout@v2
      with:
        repository: dhivya3107/repo2
        ref: test1
        path: 'dhivya3107/repo2'

    - name: Check for changes
      id: check-changes
      run: |
        cd dhivya3107/repo2
        git fetch origin
        for branch in $(git branch -r | grep -v HEAD); do
        if git diff --quiet $(git rev-parse HEAD) $(git rev-parse ${branch#origin/}); then
          echo "Changes detected!"
          echo "::set-output name=changes::true"
        else
          echo "No changes."
          echo "::set-output name=changes::false"
        fi
        done
      
    - name: Build if changes detected
      if: steps.check-changes.outputs.changes == 'true'
      run: |
        echo "Building..."
        # Add your build steps here
        
